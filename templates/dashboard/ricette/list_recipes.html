{% extends "dashboard/admin_dashboard.html" %}
{% block content %}

<form id="categoria-form" action="/aggiungi_categoria" method="POST">
  <div class="row g-2">
      <div class="col-auto">                 
        <input type="text" class="form-control" placeholder="+ nuova categoria" name="nome_categoria" required>              
      
        {% if alert %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          {{ alert }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %}       

        {% if errore %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          {{ errore }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %}
        
      </div> 
      <div class="col-auto">
        <button id="creaCategoria" class="btn btn-primary mb-3" type="submit">Crea</button>
      </div>
  </div>
</form> 

<table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Anteprima</th>
        <th scope="col">Modifica</th>
        <th scope="col">id</th>
        <th scope="col">categoria</th>
        <th scope="col">nome_ricetta</th>
        <th scope="col">ingredienti</th>
        <th scope="col">total_time</th>
        <th scope="col">prezzo</th>
        <th scope="col">elimina</th>     
      </tr>
    </thead>
    <tbody class="table-group-divider">
        {% for ricetta in elenco_ricette %}
        <tr>            
            <td scope="row"><a class="btn btn-primary" href="{{ url_for('dashboard_routes.read_recipe') }}" 
              role="button"><i class="bi bi-search"></i></a>                
            </td>
            <td scope="row"><a class="btn btn-primary" href="{{ url_for('dashboard_routes.update_recipe') }}" 
                role="button">Vai</a>
            </td>           
            <td>{{ ricetta['id'] }}</td>
            <td>{{ ricetta['categoria'] }}</td>
            <td>{{ ricetta['nome_ricetta'] }}</td>
            <td>{{ ricetta['ingredienti'] }}</td>
            <td>{{ ricetta['total_time'] }}</td>
            <td>{{ ricetta['prezzo'] }}</td>
            <td>
              <!-- crea il pulsante elimina e gli associa il nome ricetta -->
              <button id="elimina-button" class="btn btn-danger" data-nome_ricetta="{{ ricetta['nome_ricetta'] }}">
                <i class="bi bi-trash"></i>
              </button>
            </td>
        </tr>
        {% endfor %}             
    </tbody>
  </table>

  <script type="text/javascript" src="static/js/struttura_script.js"></script>
 
{% endblock %}
